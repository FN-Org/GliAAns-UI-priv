{# this template is used to render the top-level index.html. #}
{% if root_module_name %}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="refresh" content="0; url=./{{ root_module_name.replace(".","/") }}.html"/>
</head>
</html>
{% else %}
{% extends "frame.html.jinja2" %}
{% block title %}GliAAns-UI Documentation{% endblock %}
{% block style %}
    {{ super() | safe }}
    <style>
        /* Header */
        header.pdoc {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }

        header.pdoc img {
            max-width: 200px;
            max-height: 75px;
            padding-right: 2rem;
        }

        header.pdoc input[type=search] {
            outline-offset: 0;
            font-size: 1.5rem;
            min-width: 60%;
            flex-grow: 1;
            padding-left: .5rem;
            margin: 1.75rem 0;
        }

        /* NAVIGATION STYLE */
        nav.pdoc {
            padding-right: 1.5rem; /* spazio tra nav e bordo schermo */
        }

        nav.pdoc ul {
            list-style: none;
            padding-left: 0.3rem;
            margin: 0;
        }

        nav.pdoc li {
            margin: 0.4rem 0;
        }

        nav.pdoc a {
            text-decoration: none;
            color: #222;
            transition: color 0.2s ease;
        }

        nav.pdoc a:hover {
            color: #0066cc;
        }

        /* Details (dropdown) styling */
        nav.pdoc details {
            margin: 0.3rem 0;
            padding: 0.2rem 0.4rem;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        nav.pdoc details:hover {
            background: rgba(0, 0, 0, 0.04);
        }

        nav.pdoc summary {
            cursor: pointer;
            font-weight: 600;
            color: #111;
            list-style: none;
            display: flex;
            align-items: center;
        }

        nav.pdoc summary::-webkit-details-marker {
            display: none;
        }

        /* Custom arrow icon */
        nav.pdoc summary::before {
            content: "â–¸";
            font-size: 0.8rem;
            margin-right: 0.4rem;
            transition: transform 0.2s ease;
        }

        nav.pdoc details[open] summary::before {
            transform: rotate(90deg);
        }

        nav.pdoc ul ul {
            padding-left: 1.2rem;
            margin-top: 0.3rem;
        }

        /* Active link or hovered parent */
        nav.pdoc li a.active {
            color: #0056b3;
            font-weight: bold;
        }
    </style>
{% endblock %}

{% block nav %}
    {% block nav_title %}
        {% if logo %}
            {% if logo_link %}<a href="{{ logo_link }}">{% endif %}
            <img src="{{ logo }}" class="logo" alt="project logo"/>
            {% if logo_link %}</a>{% endif %}
        {% endif %}
    {% endblock %}
<h2>Available Modules</h2>
  <ul>
    {% set groups = {} %}
    {% for mod in all_modules if "._" not in mod and not mod.startswith("_") %}
      {% set top = mod.split(".")[0] %}
      {% if top not in groups %}
        {% set _ = groups.update({top: []}) %}
      {% endif %}
      {% if "." in mod %}
        {% set _ = groups[top].append(mod) %}
      {% endif %}
    {% endfor %}

    {% for top, subs in groups.items() %}
      <li>
        {% if subs %}
          <details>
            <summary>{{ top }}</summary>
            <ul>
              {% for sub in subs | sort %}
                <li><a href="{{ sub.replace('.','/') }}.html">{{ sub.split('.', 1)[1] }}</a></li>
              {% endfor %}
            </ul>
          </details>
        {% else %}
          <a href="{{ top.replace('.','/') }}.html">{{ top }}</a>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endblock %}

{% block content %}
<header class="pdoc">
    <h1> GliAAns-UI Documentation </h1>
    {% if search %}
        <input type="search" placeholder="Search API Documentation..." aria-label="search box">
    {% endif %}
</header>
<main class="pdoc"></main>
{% if search %}
    {% include "search.html.jinja2" %}
{% endif %}
{% endblock %}
{% endif %}
